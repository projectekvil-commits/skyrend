import{i as p}from"./footer-C1ZwFiPz.js";function w(){const a=document.querySelector(".hero");if(!a)return;const e=a.querySelectorAll(".hero__bg-layer");window.addEventListener("scroll",()=>{const r=window.scrollY,n=a.offsetHeight;r>n||e.forEach((i,c)=>{const l=(c+1)*.15;i.style.transform=`translateY(${r*l}px)`})},{passive:!0})}function S(){const a=document.querySelector(".hero__particles");if(!a)return;const e=25;for(let r=0;r<e;r++){const n=document.createElement("div");n.classList.add("particle");const i=40+Math.random()*20,c=Math.random()*100,l=1+Math.random()*3,o=3+Math.random()*5,f=Math.random()*6,d=-30+Math.random()*60;n.style.cssText=`
      left: ${i}%;
      top: ${c}%;
      width: ${l}px;
      height: ${l}px;
      animation-duration: ${o}s;
      animation-delay: ${f}s;
      --drift: ${d}px;
    `,a.appendChild(n)}}function b(){const a=document.querySelector(".hero__content"),e=document.querySelector(".hero__rift");a&&document.addEventListener("mousemove",r=>{const{clientX:n,clientY:i}=r,{innerWidth:c,innerHeight:l}=window,o=(n/c-.5)*10,f=(i/l-.5)*10;a.style.transform=`translate(${o}px, ${f}px)`,e&&(e.style.transform=`translate(${o*.5}px, ${f*.5}px)`)})}function E(){w(),S(),b()}const A=460;let v=!1;function L(a){const e=document.createElement("canvas");e.width=a.naturalWidth,e.height=a.naturalHeight;const r=e.getContext("2d");r.drawImage(a,0,0);try{const{data:n}=r.getImageData(0,0,e.width,e.height),i=e.width,c=e.height;let l=c,o=0;for(let d=0;d<c;d++)for(let x=0;x<i;x++)n[(d*i+x)*4+3]>20&&(d<l&&(l=d),d>o&&(o=d));return{charHeight:Math.max(o-l,1),canvasHeight:c}}catch{return{charHeight:a.naturalHeight,canvasHeight:a.naturalHeight}}}async function M(){if(v)return;v=!0;const a=Array.from(document.querySelectorAll(".faction__char"));a.length&&(await Promise.all(a.map(e=>e.complete?Promise.resolve():new Promise(r=>{e.onload=r,e.onerror=r}))),a.forEach(e=>{if(!e.naturalWidth)return;e.style.transform="none",e.style.transformOrigin="bottom center";const r=L(e),n=e.getBoundingClientRect().height;if(!n)return;const i=r.charHeight/r.canvasHeight,c=n*i,l=A/c,o=Math.min(Math.max(l,.5),3.5);e.style.transform=`scale(${o.toFixed(3)})`,console.log(`[CharNorm] ${e.src.split("/").pop()} ratio=${i.toFixed(2)} visH=${Math.round(c)}px â†’ scale=${o.toFixed(2)}`)}))}function H(){const a=document.createElement("canvas");a.id="site-bg-canvas",document.body.prepend(a);const e=a.getContext("2d");function r(){a.width=window.innerWidth,a.height=document.documentElement.scrollHeight}r(),window.addEventListener("resize",()=>{r(),f()});const n=140,i=18;let c=[],l=[];function o(s,h){return s+Math.random()*(h-s)}function f(){const s=a.width,h=a.height;c=Array.from({length:n},()=>({x:o(0,s),y:o(0,h),r:o(.4,1.6),speed:o(.15,.55),drift:o(-.12,.12),alpha:o(.15,.5),flicker:o(.003,.012),flickerDir:Math.random()>.5?1:-1,baseAlpha:0})),c.forEach(t=>t.baseAlpha=t.alpha),l=Array.from({length:i},()=>d(s,h))}function d(s,h){const t=["rgba(62, 201, 192,","rgba(212, 168, 75,","rgba(200, 100, 50,","rgba(255, 255, 230,"],m=t[Math.floor(Math.random()*t.length)];return{x:o(0,s),y:o(0,h),r:o(1,3.5),speed:o(.2,.7),drift:o(-.3,.3),alpha:0,maxAlpha:o(.3,.75),life:0,maxLife:o(180,420),color:m}}f();const x=[{x:.15,y:.1,r:340,color:"rgba(62, 201, 192,",a:.04,dx:12e-5,dy:8e-5},{x:.8,y:.55,r:400,color:"rgba(180, 100, 40,",a:.05,dx:-9e-5,dy:11e-5},{x:.5,y:.85,r:300,color:"rgba(62, 60, 140,",a:.045,dx:1e-4,dy:-7e-5}];function y(){const s=a.width,h=a.height;e.clearRect(0,0,s,h),e.fillStyle="#07080f",e.fillRect(0,0,s,h),x.forEach(t=>{t.x+=t.dx,t.y+=t.dy,(t.x<0||t.x>1)&&(t.dx*=-1),(t.y<0||t.y>1)&&(t.dy*=-1);const m=t.x*s,g=t.y*h,u=e.createRadialGradient(m,g,0,m,g,t.r);u.addColorStop(0,t.color+t.a+")"),u.addColorStop(1,t.color+"0)"),e.beginPath(),e.arc(m,g,t.r,0,Math.PI*2),e.fillStyle=u,e.fill()}),c.forEach(t=>{t.y-=t.speed,t.x+=t.drift,t.y<-4&&(t.y=h+4,t.x=o(0,s)),t.x<-4&&(t.x=s+4),t.x>s+4&&(t.x=-4),t.alpha+=t.flicker*t.flickerDir,(t.alpha>=t.baseAlpha*1.6||t.alpha<=t.baseAlpha*.3)&&(t.flickerDir*=-1),e.beginPath(),e.arc(t.x,t.y,t.r,0,Math.PI*2),e.fillStyle=`rgba(220, 215, 255, ${t.alpha})`,e.fill()}),l.forEach((t,m)=>{t.life++,t.y-=t.speed,t.x+=t.drift;const g=t.life/t.maxLife;if(t.alpha=g<.3?t.maxAlpha*(g/.3):t.maxAlpha*(1-(g-.3)/.7),t.life>=t.maxLife){l[m]=d(s,h);return}const u=e.createRadialGradient(t.x,t.y,0,t.x,t.y,t.r*4);u.addColorStop(0,t.color+t.alpha+")"),u.addColorStop(.4,t.color+t.alpha*.4+")"),u.addColorStop(1,t.color+"0)"),e.beginPath(),e.arc(t.x,t.y,t.r*4,0,Math.PI*2),e.fillStyle=u,e.fill(),e.beginPath(),e.arc(t.x,t.y,t.r*.6,0,Math.PI*2),e.fillStyle=t.color+Math.min(t.alpha*2,1)+")",e.fill()}),requestAnimationFrame(y)}y(),setTimeout(r,2e3)}function _(){const a=document.querySelector(".navbar");if(!a)return;const e=()=>{a.classList.toggle("scrolled",window.scrollY>50)};window.addEventListener("scroll",e,{passive:!0}),e();const r=document.querySelector(".navbar__hamburger"),n=document.querySelector(".navbar__links");r&&n&&(r.addEventListener("click",()=>{r.classList.toggle("open"),n.classList.toggle("open")}),n.querySelectorAll(".navbar__link").forEach(i=>{i.addEventListener("click",()=>{r.classList.remove("open"),n.classList.remove("open")})}))}function C(){const e=document.querySelectorAll(".reveal, .reveal-left, .reveal-right, .reveal-scale");if(e.length===0)return;const r=new IntersectionObserver(n=>{n.forEach(i=>{i.isIntersecting&&(i.target.classList.add("revealed"),r.unobserve(i.target))})},{threshold:.08,rootMargin:"0px 0px -48px 0px"});e.forEach(n=>r.observe(n))}function $(){const a=document.createElement("div");a.className="cursor-glow",document.body.appendChild(a);let e=0,r=0,n=0,i=0;document.addEventListener("mousemove",l=>{e=l.clientX,r=l.clientY});function c(){n+=(e-n)*.08,i+=(r-i)*.08,a.style.left=n+"px",a.style.top=i+"px",requestAnimationFrame(c)}c()}function P(){const a=document.querySelectorAll(".faction");if(a.length===0)return;a.forEach((r,n)=>{r.classList.add(n%2===0?"reveal-left":"reveal-right")});const e=new IntersectionObserver(r=>{r.forEach(n=>{if(n.isIntersecting){const i=[...a].indexOf(n.target);n.target.style.transitionDelay=`${i*60}ms`,n.target.classList.add("revealed"),setTimeout(()=>{n.target.style.transitionDelay="0ms"},800+i*60),e.unobserve(n.target)}})},{threshold:.04,rootMargin:"0px 0px 80px 0px"});a.forEach(r=>e.observe(r))}function q(){document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",e=>{const r=a.getAttribute("href");if(r==="#")return;e.preventDefault();const n=document.querySelector(r);n&&n.scrollIntoView({behavior:"smooth",block:"start"})})})}document.addEventListener("DOMContentLoaded",async()=>{H(),_(),E(),C(),P(),q(),$(),await p(),setTimeout(M,1500),document.body.classList.add("loaded")});
